name: run test.py

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:

      - name: checkout repo content
        uses: actions/checkout@v2 # checkout the repository content to github runner

      - name: setup python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9' # install the python version needed
          
      - name: hiho
        run: |
          output=$(python test.py)
          ticket_id= $output | tail -n 1 | grep -oE 'CICDSSWA-[0-9]+`'
          echo "changelog=$ticket_id" >> $GITHUB_OUTPUT
        id: step1
        
      - name: Print changelog
        run: echo "${{ steps.step1.outputs.changelog }}" >> $GITHUB_STEP_SUMMARY
